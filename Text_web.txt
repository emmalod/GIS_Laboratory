---> Introduction 


Landslides are geological phenomena characterized by the movement of a mass of rock, soil, or debris down a slope.Natural factors and human activities like deforenstation,mining,construction can contribute to landslide occurrence.
Understanding and assessing landslide hazards is crucial for managing and mitigating the risks they pose to human lives, infrastructure, and the environment. This is where susceptibility maps come into play.
Susceptibility maps depict the spatial probability levels for a certain area to be
prone to landslides, based on local environmental variables. The second key step is
exposure assessment which implies counting (or estimating) of people, property,
systems, or other elements present in hazard zones. 


-->Our project

 Firstly we have download the required data : 
- DTM (Digital Terrain Model): DTM refers to a digital representation of the topography or terrain of a specific area. It provides detailed information about the elevation and shape of the land surface
-NDVI (Normalized Difference Vegetation Index): NDVI is a numerical indicator that measures and quantifies the density and health of vegetation in an area. It is calculated using the visible and near-infrared light reflected by vegetation. NDVI values range from -1 to 1, with higher values indicating healthier and more abundant vegetation. In landslide susceptibility mapping, NDVI can be used to assess the influence of vegetation cover on slope stability and identify areas with limited vegetation that may be more susceptible to landslides.
-DUSAF (Digital Urban Surface Analysis Factors) : DUSAF consists in a set of factors obtained from high-resolution remote sensing data. It is useful in order to analyze urban patterns,quantifying the urban heat island effect and assessing urban sprawl.
-BUFFER LAYERS OF RIVER, ROADS, FAULTS: The buffer layer is obtained by buffering the original features using a specific distance. This layer is very useful in order to assess relationships between these elements and landslides, helping in evaluating potential impacts. 
-LS (Landslide Inventory): it consists in a collection of information related to landslides in a specific area. In our case it is specified the typology of the landslide.   

STEP1- Data PreProcessing for susceptibility mapping
Firstly, the downloaded raster layers have been clipped using as mask the vector layer of the group 6 area. This has been done using the QGIS Processing tool r.resamp (from GRASS plugin) , in order to have, for every raster produced, the same Extent and Pixel Size. 
For the vector layers, they have been clipped using Clip Vector by Mask Layer (GDAL plugin), using as mask the vector layer of the group 6 area.
  
Then, the environmetal factors are extracted by DTM using SAGA plugin: 
-SLOPE: the value of the cell in the output slope raster gives the
slope value, obtained by calculating the maximum rate of
change between each cell and its neighbors. The lower the
slope value, the flatter is the terrain; the higher the slope value,
the steeper is the terrain. 
-ASPECT:the value of each cell in the output aspect raster indicates the direction the cell faces.
-PROFILE CURVATURE ,PLAN CURVATURE : The curvature tool calculates the rate of change in slope along a raster surface. It provides information about the concavity or convexity of the terrain, indicating whether a location is part of a ridge, valley, or flat area.

The next phase of the step 1 consists in defining the No Landslide Zones, that are those zones of the group 6 area that have a slope<20° or slope>70°. 
There are some big NLZ zones, and so it be migth convenient to set to 0 negative values and then remove very small patches  using the Sieve tool from GDAL.
The obtained raster then  is vectorized in order to obtain the polygons of NLZ using r.to.vect from GRASS plugin. 

Since the definition of NLZ is simplified (only according to slope) there may be
some NLZ areas which overlap the LandslideInventory polygons. For these reason, it is necessary to repear this using the Difference tool that allow to remove from NLZ layer the LS overlapping parts.

Then, in order to prepare our data to the training/testing phase, it is necessary to add a new field called hazard to the attribute table of NLZ and LS, and then assign value 0 for the attribute Hazard in NLZ, and 1 for hazard in LS. 

Training and Testing 
At this point, it has been decided the training-testing ratio that will be used for the machine learning model (70/30).For both LS and NLZ it has been created a new text attribute 'Train_Test', at which in a random way is assigned the value 'Training' or 'Testing'. Then the processed LS has been merged with the one of NLZ.  
The next step consists in create random points inside the polygons: the model should be fed with 1000 points, of which 700 for the training phase(350 with 0 Hazard vs 350 with 1 Hazard) and 300(150 with 0 Hazard vs 150 with 1 Hazard) for the testing phase. For this purpose it has been used the tool Random Points in layer bounds.

  --- tabellina con punti di training e hazard e testing e hazard----

At the end to have a unique layer with training points and testing points we use again the Merge tool to obtain trainingPoints and testingPoints. This merged layers hasn't any geospatial information connected so it is necessary  to sample the environmental factors using the Point Sampling Tool plugin that creates a table with all the useful environmental factors in the selected points. At the end would exist two layers trainingPointsSampled and testingPointsSampled with the associated environmental factors. 

At the end of the step 1, the mandatory outputs are the following: 
-dtm.tif
-ndvi.tif
-aspect.tif 
-dusaf.tif 
-faults.tif 
-plan.tif 
-profile.tif 
-rivers.tif 
-roads.tif 
-slope.tif 
-NLZ.gpkg 
-trainingPointsSampled.gpkg 
-testingPointsSampled.gpkg 



Before to start with the next step, it is necessary that all the output raster layers have the same CRS,extent and pixel size.


Susceptibility Map Generation 
For the generation of the susceptibility map we use R in QGIS with the ModelMap given script.
In the validation step the resulted susceptibility map layer has been reclassified into 2 classes using the Accuracy Assessment and Sampling tool. 


STEP2- Susceptibility map generation 
In this step the ModelMap package of R in QGIS has been used, generating the susceptibility map. Once the susceptibility map has been generated, the R output should be validated: the resulted layer is reclassified in 2 classes, 0 and 1, using Accuracy Assessment and Sampling tool. 
The mandatory outputs of this step are the Susceptibility Map and the Error matrix produced in the validation phase. 



STEP3- Data PreProcessing for exposure assessment
In this step the population raster dataset has been downloaded from WorldPop and firstly this dataset has been reprojected using the same CRS of the group 6 area and of the susceptibility map. Then the reprojected population raster dataset has been clipped using as mask layer the group 6 sub area. 
At this point , the susceptibility raster map is reclassified using 4 different classes of risk (low, moderate, high, very high) and then the reclassified susceptibility map is resampled using r.resamp.stats and setting the mode as aggregation method. 
The mandatory outputs of this step consist in :
-Reprojected and clipped population raster dataset in GeoTiff format 
-Reclassified and resampled susceptibility raster map in Geotiff format 



STEP4- Exposure assessment 
Exposure assessment is a process used to determine the potential impact and vulnerability of assets, populations, or ecosystems to various hazards or risks. It involves evaluating and quantifying the elements at risk in a given area, such as buildings, infrastructure, natural resources, and people, to understand their susceptibility to potential hazards.
In this step for each one of the susceptibility classes has been computed the population counts. 
The mandatory output of this step consists in the table with the computed population in each susceptibility class. 
 

STEP 5 - Website and WebGIS development
As a final step, we have developed a WebGIS application that enables users to visualize the analyzed maps and the landslide susceptibility map. Our intuitive interfaces and interactive functionalities allow seamless navigation, zooming in and out, toggling different layers, and accessing supplementary information. These features enhance users' understanding of the landslide susceptibility assessment and the related spatial data.

In addition, our WebGIS platform offers a selection of base maps to choose from, including:

Stamen Toner:
This map style presents a sleek and high-contrast design, emphasizing roads, labels, and boundaries with crisp black and white tones. It provides a visually striking representation, making it perfect for highlighting essential geographic features.

Stamen Watercolor:
The Stamen Watercolor base map brings a unique hand-drawn aesthetic to the map. It beautifully renders landscapes, buildings, and water bodies with watercolor-style brush strokes, adding a touch of creativity and elegance.

Bing Maps Aerial:
With high-resolution satellite photographs, the Bing Maps Aerial offers a bird's-eye view of landscapes, cities, and landmarks. It allows users to explore and analyze areas from an aerial perspective, providing valuable insights.

Bing Maps Roads:
The Bing Maps Roads base map focuses on road networks, providing detailed information on streets, highways, and transportation infrastructure. It is particularly useful for route planning, navigation, and understanding the connectivity of road systems.

OpenStreetMap:
OpenStreetMap is a collaborative and continuously evolving map created by a global community. It offers comprehensive coverage worldwide and includes detailed information about roads, buildings, landmarks, and points of interest. It serves as a rich and up-to-date mapping foundation.

By offering this diverse range of base maps, our WebGIS platform ensures flexibility and variety in visualizing data and exploring geographical information. Whether you prefer a clean and minimalistic design, an artistic touch, or comprehensive mapping coverage, these base maps provide a wide array of options to enhance your mapping endeavors.



---> Issues 
The main issues we encountered during the project are as follows:

1. We faced difficulties in generating the susceptibility map. We had to ensure that all the required layers had the same extent and pixel dimensions. In order to do that we had to use the tool r.resamp.

2. The susceptibility map is missing a small portion. We tried generating it using different sets of training points from different PCs, but the problem remained unresolved.

2. Some team members were unable to continue the process of generating the error matrix on their PCs because they lacked the "Accuracy Assessment and Sampling" tool.

3. We had to find an alternative approach (using Fluorish) to plot the pie chart showing the percentage of the population residing in the four different risk classes. The only team member who had access to the "Accuracy Assessment and Sampling" functionality and successfully completed the QGIS requirements encountered problems with the DataPlotly plugin. Despite selecting "pie chart" from the menu, only a solid-colored line was plotted.




-->Result
The error matrix that we have obtained from the validation procedure is the following: 
     --mettere la matrix---
The overall accuracy OA, that represents the proportion of correctly classified pixels out of the total number of pixels assumes the value of 0.77, and it signifies a sufficiently high level of reliability in the results of the susceptibility map.

From the phase of Population Exposure Assessment it is revealed that the majority of the population lives in the low risk of landslide zone, but despite of this a consistent part of the population of the area lives in the high and very high risk of landslide zone. 
   --- mettere il grafico--- 





